# Vocaflow
VocabFlow AI開発仕様書
1. プロジェクト概要

プロジェクト名: VocabFlow - ハンズフリー英単語学習システム
開発言語: PHP, HTML, CSS, JavaScript
対象デバイス: スマートフォン（ブラウザベース）

2. 基本機能要件
2.1 ハンズフリー英単語リスニング機能
機能概要

「開始」ボタン押下後、英単語と日本語訳を自動音声読み上げ
スマホ画面に触れることなく学習継続可能
通学・家事・ランニング中など、ながら学習に対応

詳細仕様
音声読み上げ

読み上げ順序：英単語 → 間隔（2秒） → 日本語訳 → 間隔（3秒） → 次の単語
音声合成：Web Speech API（SpeechSynthesis）を使用
英単語：英語音声で読み上げ
日本語訳：日本語音声で読み上げ
読み上げ速度：調整可能（0.5倍速〜2.0倍速）

音声出力モード切り替え

片耳モード：左耳または右耳を選択可能
両耳モード：ステレオ出力
モード切り替えは学習中でも変更可能
赤ちゃんの泣き声や呼び出し音への対応を考慮

学習制御

一時停止/再開機能
スキップ機能（現在の単語をスキップして次へ）
音量調整（学習中でも変更可能）
学習中断時の再開位置記憶

2.2 終了時テスト機能
機能概要

リスニング学習終了後、自動的にテストモードへ移行
学習した単語からランダムに4択問題を出題
問題数は学習した単語数の120%（小数点以下切り捨て）

詳細仕様
問題形式

英単語 → 日本語訳選択
日本語訳 → 英単語選択
上記2パターンをランダムに出題

問題生成ロジック

正解選択肢：学習した単語から選出
不正解選択肢：同じ難易度レベルの他の単語から3つ選出
選択肢の順序はランダム

結果表示

正解数/総問題数
正答率（%）
学習時間
間違えた単語のリスト表示

3. 画面構成
3.1 メイン画面 (index.php)
学習設定エリア

単語カテゴリ選択（TOEIC、日常会話、ビジネスなど）
難易度レベル選択（初級、中級、上級）
学習単語数設定（10語、20語、50語、100語）
読み上げ速度調整スライダー
音声出力モード選択（片耳左/片耳右/両耳）
音量調整スライダー

重要：学習設定は学習中でも変更可能とする
学習制御エリア

学習開始ボタン
一時停止/再開ボタン
停止ボタン
スキップボタン

学習状況表示エリア

現在の単語表示
学習進捗バー（現在位置/総単語数）
経過時間表示
現在再生中の単語/訳の表示

3.2 テスト画面 (test.php)
問題表示エリア

問題文表示
4つの選択肢ボタン
問題番号/総問題数表示

結果表示エリア

正解数/総問題数
正答率（%表示）
学習時間
間違えた単語一覧
5. 技術仕様
5.1 音声制御

Web Speech API: SpeechSynthesis使用
音声言語設定:

英単語：lang='en-US'
日本語：lang='ja-JP'



5.2 セッション管理

PHPセッションを使用してユーザーの学習状態を管理
セッションID生成でユーザー識別

5.3 レスポンシブ対応

スマートフォン最適化
タッチ操作対応
縦画面/横画面対応
4. データベース設計
5. 技術仕様
5.1 音声制御

Web Speech API: SpeechSynthesis使用
音声言語設定:

英単語：lang='en-US'
日本語：lang='ja-JP'



5.2 セッション管理

PHPセッションを使用してユーザーの学習状態を管理
セッションID生成でユーザー識別

5.3 レスポンシブ対応

スマートフォン最適化
タッチ操作対応
縦画面/横画面対応
6. ファイル構成
/vocabflow/
├── index.php (メイン画面)
├── test.php (テスト画面)
├── api/
│   ├── get_words.php (単語取得API)
│   ├── save_progress.php (学習進捗保存API)
│   ├── generate_test.php (テスト問題生成API)
│   └── save_test_result.php (テスト結果保存API)
├── css/
│   └── style.css
├── js/
│   ├── speech.js (音声制御)
│   ├── learning.js (学習制御)
│   └── test.js (テスト制御)
└── config/
    └── database.php (DB接続設定)
7. 重要な実装ポイント
7.1 学習中の設定変更対応

JavaScript設定変更イベントリスナー実装
音声出力モード即座切り替え機能
速度・音量のリアルタイム調整
7.2 問題数計算ロジック
$question_count = floor($learned_word_count * 1.2);
7.3 音声制御の安定性

音声読み上げ完了検知
エラーハンドリング
ブラウザ互換性対応

7.4 データ永続化

学習進捗の自動保存
中断時の再開位置記憶
テスト結果の履歴管理

この仕様書に基づいて、PHPとHTMLを使用したハンズフリー英単語学習システムの開発を進めてください。
